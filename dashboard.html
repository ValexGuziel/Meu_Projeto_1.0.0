<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <!-- Incluindo a biblioteca Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Bibliotecas para exportação de PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script src="dashboard.js" defer></script>
  <title>Dashboard - Sistema OS</title>
</head>

<body>
  <div class="container dashboard-container">
    <div class="header">
      <i class="fas fa-chart-line logo"></i>
      <h1>Dashboard de Operações</h1>
    </div>
    <div class="user-info-header">
      <span id="user-greeting"></span>
      <button id="logout-btn" class="btn btn-logout"><i class="fas fa-sign-out-alt"></i> Sair</button>
    </div>

    <div class="dashboard-nav">
      <a href="index.html" class="btn btn-save"><i class="fas fa-plus"></i> Nova OS</a>
      <a href="gerenciar.html" class="btn btn-manage-link"><i class="fas fa-tasks"></i> Visualizar OS</a>
      <button id="export-pdf-btn" class="btn btn-secondary"><i class="fas fa-file-pdf"></i> Exportar para PDF</button>
    </div>

    <!-- Filtros de Data -->
    <div class="filters-container" style="margin-bottom: 25px;">
      <div class="filter-group">
        <label for="start-date-filter">Data Inicial</label>
        <input type="date" id="start-date-filter">
      </div>
      <div class="filter-group">
        <label for="end-date-filter">Data Final</label>
        <input type="date" id="end-date-filter">
      </div>
      <div style="display: flex; align-items: flex-end; gap: 10px;">
        <button id="apply-date-filter-btn" class="btn btn-save" style="padding: 10px 15px;"><i
            class="fas fa-filter"></i> Aplicar</button>
        <button id="clear-date-filter-btn" class="btn btn-secondary" style="padding: 10px 15px;"><i
            class="fas fa-times"></i> Limpar</button>
      </div>
    </div>

    <!-- Cards de Resumo -->
    <div class="summary-cards">
      <div class="card">
        <div class="card-icon"><i class="fas fa-clipboard-list"></i></div>
        <div class="card-content">
          <span class="card-title">Total de OS</span>
          <span class="card-value" id="total-os-value">--</span>
        </div>
      </div>
      <div class="card">
        <div class="card-icon" style="color: #ffc107;"><i class="fas fa-hourglass-half"></i></div>
        <div class="card-content">
          <span class="card-title">Pendentes</span>
          <span class="card-value" id="pending-os-value">--</span>
        </div>
      </div>
      <div class="card">
        <div class="card-icon" style="color: #17a2b8;"><i class="fas fa-cogs"></i></div>
        <div class="card-content">
          <span class="card-title">Em Andamento</span>
          <span class="card-value" id="in-progress-os-value">--</span>
        </div>
      </div>
      <div class="card">
        <div class="card-icon" style="color: #388e3c;">
          <i class="fas fa-tachometer-alt"></i>
        </div>
        <div class="card-content">
          <div class="card-title">Tempo Médio de Conclusão</div>
          <!-- MTTR - Mean Time To Repair -->
          <div class="card-value" id="avg-time-value">0 <span style="font-size: 0.5em; color: #6c757d;">dias</span>
          </div>
        </div>
      </div>
    </div>



    <!-- Gráficos -->
    <div class="charts-grid">
      <div class="chart-container"><canvas id="statusChart"></canvas></div>
      <div class="chart-container"><canvas id="priorityChart"></canvas></div>
      <div class="chart-container"><canvas id="maintainerChart"></canvas></div>
      <div class="chart-container"><canvas id="topEquipmentChart"></canvas></div>
      <div class="chart-container"><canvas id="downtimeChart"></canvas></div>
    </div>
  </div>
</body>

</html>